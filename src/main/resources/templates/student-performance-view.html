<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Student Performance | SRMS</title>

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- Bootstrap Icons -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
		<!-- Custom Theme -->
	<link rel="stylesheet" href="/css/klu-theme.css">
</head>

<body>

	<!-- HEADER -->
	<div th:replace="~{fragments/header :: header}"></div>

	<main class="container content-wrapper mt-4">

		<!-- ================= BREADCRUMB ================= -->
		<div class="d-flex justify-content-between align-items-center mb-3">
			<nav aria-label="breadcrumb">
				<ol class="breadcrumb mb-0">
					<li class="breadcrumb-item">
						<a th:href="@{/students}">
							<i class="bi bi-house-fill"></i> Students
						</a>
					</li>
					<li class="breadcrumb-item active">
						Performance
					</li>
				</ol>
			</nav>
		</div>

		<!-- ================= STUDENT DETAILS ================= -->
		<div class="card shadow-sm mb-4">
			<div class="card-header bg-light fw-semibold">
				<i class="bi bi-person-badge-fill me-1"></i> Student Details
			</div>

			<div class="card-body">
				<div class="row g-3">
					<div class="col-md-4">
						<strong>Name:</strong>
						<div th:text="${student.name}"></div>
					</div>

					<div class="col-md-4">
						<strong>Course:</strong>
						<div th:text="${student.course}"></div>
					</div>

					<div class="col-md-4">
						<strong>Year of Admission:</strong>
						<div th:text="${student.yearOfAdmission}"></div>
					</div>
				</div>
			</div>
		</div>

		<!-- ================= PERFORMANCE ACTION ================= -->
		<div class="mb-3">
			<a th:href="@{/students/{id}/performance/add(id=${student.id})}" class="btn btn-primary">
				<i class="bi bi-plus-circle"></i> Add Semester CGPA
			</a>
		</div>

		<!-- ================= SEMESTER PERFORMANCE ================= -->
		<div class="card shadow-sm">
			<div class="card-header bg-light fw-semibold">
				<i class="bi bi-bar-chart-line-fill me-1"></i> Semester Performance
			</div>

			<div class="card-body p-0">
				<table class="table table-bordered table-hover mb-0">
					<thead class="table-light">
						<tr>
							<th>Academic Year</th>
							<th>Semester</th>
							<th>CGPA</th>
							<th class="text-center">Action</th>
						</tr>
					</thead>

					<tbody>
						<tr th:each="p : ${performances}">
							<td th:text="${p.academicYear}"></td>
							<td th:text="${p.semester}"></td>
							<td th:text="${p.cgpa}"></td>
							<td class="text-center">
								<a th:href="@{/students/{sid}/performance/delete/{id}(
                                            sid=${student.id},
                                            id=${p.id})}" class="text-danger"
									onclick="return confirm('Delete this semester CGPA?');">
									<i class="bi bi-trash-fill"></i>
								</a>
							</td>
						</tr>

						<!-- EMPTY STATE -->
						<tr th:if="${#lists.isEmpty(performances)}">
							<td colspan="3" class="text-center text-muted py-4">
								No semester performance available
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

	</main>
	<div th:replace="fragments/footer :: footer"></div>

</body>

</html>